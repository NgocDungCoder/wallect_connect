<!DOCTYPE html>
<html>
<head>
    <title>Connect Wallet</title>
    <script type="module">
        import SignClient from "https://cdn.skypack.dev/@walletconnect/sign-client";

        const projectId = "YOUR_PROJECT_ID"; // üîë Thay b·∫±ng projectId t·ª´ WalletConnect Cloud

        async function connectWallet() {
          const client = await SignClient.init({ projectId });

          const { uri, approval } = await client.connect({
            requiredNamespaces: {
              eip155: {
                methods: ["eth_sendTransaction", "personal_sign", "eth_signTypedData"],
                chains: ["eip155:1"],
                events: ["chainChanged", "accountsChanged"],
              },
            },
          });

          // Hi·ªÉn th·ªã QR ho·∫∑c m·ªü MetaMask
          const qrDiv = document.getElementById("qr");
          qrDiv.innerHTML = `<p>Scan QR with Wallet:</p><pre>${uri}</pre>`;

          const session = await approval();
          const address = session.namespaces.eip155.accounts[0].split(":")[2];

          // G·ª≠i d·ªØ li·ªáu v·ªÅ Flutter
          window.flutter_inappwebview.callHandler('onConnected', address);
        }

        window.onload = connectWallet;
    </script>
</head>
<body>
<h2>WalletConnect v2</h2>
<div id="qr"></div>
</body>
</html>