<!DOCTYPE html>
<html>
  <head>
    <title>Connect Wallet</title>
    <meta charset="utf-8" />
    <script type="module">
      import { EthereumProvider } from "https://unpkg.com/@walletconnect/ethereum-provider@2.8.0/dist/index.umd.js";

      async function connect() {
        const provider = await EthereumProvider.init({
          projectId: "99fa72264e61592374a49f39d41ecbe8", // Thay bằng projectId của bạn
          chains: [1], // Ethereum mainnet
          methods: ["eth_sendTransaction", "personal_sign", "eth_signTypedData"],
          showQrModal: true, // Hiển thị modal chọn ví
        });

        await provider.enable(); // Mở modal chọn ví

        const accounts = await provider.request({ method: "eth_accounts" });
        const address = accounts[0];

        // Gửi địa chỉ về Flutter
        if (window.flutter_inappwebview) {
          window.flutter_inappwebview.callHandler('onConnected', address);
        } else {
          console.log("Flutter handler not found");
        }
      }

      window.onload = connect;
    </script>
  </head>
  <body>
    <h2>Connecting...</h2>
  </body>
</html>
